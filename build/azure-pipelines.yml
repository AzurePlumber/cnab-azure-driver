trigger:
  branches:
  include:
    - refs/heads/main

pr:
 branches:
  include:
  - main

pool:
  vmImage: 'Ubuntu 18.04'

variables:
  GOVERSION:  '1.14.6'
  System.Debug: true

steps:
  - task: GoTool@0
    inputs:
    version: '$(GOVERSION)'
    displayName: 'Install Go Version '$(GOVERSION)'

  - script: |
    make build -d 
    workingDirectory: '$(System.DefaultWorkingDirectory)'
    displayName: 'Build'
  
  - script: |
    make test-all -d 
    workingDirectory: '$(System.DefaultWorkingDirectory)'
    displayName: 'Build'
